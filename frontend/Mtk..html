<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My token</title>
</head>
<body>
    <h2>Simple dApp</h2>
    <button onclick="connectWallet();">Connect Metamask</button>
    <p id="wallet">Wallet: not connected</p>
    <input type="text" id="address" placeholder="Enter address" />
    <button onclick="checkBalance();">Check balance</button>
    <p id="balance"></p>

<script src="https://cdn.jsdelivr.net/npm/ethers@6.8.0/dist/ethers.umd.min.js"></script>
    <script>
        let provider;
        let contract;
        let signer;

        const addressToken = "0x5FbDB2315678afecb367f032d93F642f64180aa3";
        const tokenABI = [
            "function balanceOf(address) view returns(uint256)",
            "function decimals() view returns(uint8)"
        ];

        async function connectWallet() {
            if (window.ethereum) {
                provider = new ethers.BrowserProvider(window.ethereum);
                signer = await provider.getSigner();
                const userAddress = await signer.getAddress();

                document.getElementById("wallet").innerText = "Wallet: " + userAddress;

                contract = new ethers.Contract(addressToken, tokenABI, provider);
                console.log(await contract.balanceOf("0x72acEE3554A7456d47714E588C327ed86D445685"));

            } else {
                alert("Metamaks not found")
            }
        }


        async function checkBalance() {
            const address = document.getElementById("address").value;
            if (!address) return alert("Enter an address");

            const balance = await contract.balanceOf(address);
            const decimals = await contract.decimals();

            const readableBalance = ethers.formatUnits(balance, decimals);

            document.getElementById("balance").innerText = "Balance: " + readableBalance;
        }
    </script>
</body>
</html>